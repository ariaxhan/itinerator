---
import { db, addDoc, collection } from "../firebaseConfig";
---

<div class="container">
  <div class="content-wrapper">
    <div class="content">
      <div class="header">
        <img
          loading="lazy"
          srcset="https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=100 100w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=200 200w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=400 400w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=800 800w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=1200 1200w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=1600 1600w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&width=2000 2000w, https://cdn.builder.io/api/v1/image/assets/TEMP/18c1060fdb7de4a2128a3e5d304fea376e03e36e1f38556ee5a3fa91aae67d3d?apiKey=95bdd6893dbc47d0ac51c502bd26afe2&"
          class="logo"
        />
        <div class="title">Itinerator</div>
      </div>
      <div class="subtitle">Quiz</div>
      <div class="question">What city are you in?</div>
      <div class="options">
        <div class="button">SAN FRANCISCO</div>
        <div class="button">LOS ANGELES</div>
      </div>
      <div class="question">What is your timeframe?</div>
      <div class="options">
        <div class="button">ALL DAY</div>
        <div class="button">MORNING</div>
        <div class="button">AFTERNOON</div>
        <div class="button">EVENING</div>
      </div>
      <div class="question">What type of activities do you prefer?</div>
      <div class="options">
        <div class="button">OUTDOOR ADVENTURES</div>
        <div class="button">CULTURAL EXPERIENCES</div>
        <div class="button">FOOD AND DRINK</div>
      </div>
      <div class="options">
        <div class="button">SHOPPING</div>
        <div class="button">RELAXATION</div>
        <div class="button">ENTERTAINMENT</div>
      </div>
      <div class="question">What's your budget for the day?</div>
      <div class="options">
        <div class="button">BUDGET-FRIENDLY</div>
        <div class="button">MODERATE</div>
        <div class="button">LUXURY</div>
      </div>
      <div class="question">Who are you planning to go with?</div>
      <div class="options">
        <div class="button">ALONE</div>
        <div class="button">WITH A PARTNER</div>
        <div class="button">WITH FRIENDS</div>
        <div class="button">WITH FAMILY</div>
        <div class="button">WITH KIDS</div>
      </div>
      <div class="question">What modes of transportation do you have access to?</div>
      <div class="options">
        <div class="button">WALKING</div>
        <div class="button">PUBLIC TRANSPORT</div>
        <div class="button">BICYCLE</div>
        <div class="button">CAR</div>
        <div class="button">RIDE-SHARING</div>
      </div>
      <div class="question">What are your main interests?</div>
      <div class="options">
        <div class="button">HISTORY</div>
        <div class="button">ART</div>
        <div class="button">NATURE</div>
        <div class="button">FOOD</div>
        <div class="button">SHOPPING</div>
        <div class="button">SPORTS</div>
        <div class="button">NIGHTLIFE</div>
      </div>
      <div class="question">What is the current weather like in your city?</div>
      <div class="options">
        <div class="button">SUNNY</div>
        <div class="button">CLOUDY</div>
        <div class="button">RAINY</div>
        <div class="button">SNOWY</div>
      </div>
      <div class="question">Do you have any special requirements?</div>
      <div class="options">
        <div class="button">ACCESSIBILITY NEEDS</div>
        <div class="button">DIETARY RESTRICTIONS</div>
        <div class="button">PET-FRIENDLY</div>
      </div>
      <div class="question">Have you been to this city before?</div>
      <div class="options">
        <div class="button">YES</div>
        <div class="button">NO</div>
      </div>
      <div class="submit-button" onclick="submitQuiz()">SUBMIT</div>
    </div>
  </div>
</div>

<style>
  .container {
    justify-content: center;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    color: #20434d;
    font-weight: 700;
    text-align: center;
  }
  .content-wrapper {
    background-color: #fff;
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: center;
    padding: 80px 60px;
  }
  @media (max-width: 991px) {
    .content-wrapper {
      max-width: 100%;
      padding: 0 20px;
    }
  }
  .content {
    display: flex;
    width: 800px;
    max-width: 100%;
    flex-direction: column;
    align-items: center;
    margin: 29px 0 286px;
  }
  @media (max-width: 991px) {
    .content {
      margin-bottom: 40px;
    }
  }
  .header {
    display: flex;
    gap: 8px;
    font-size: 24px;
    white-space: nowrap;
  }
  @media (max-width: 991px) {
    .header {
      white-space: initial;
    }
  }
  .logo {
    aspect-ratio: 1;
    object-fit: auto;
    object-position: center;
    width: 57px;
  }
  .title {
    font-family: Rubik, sans-serif;
    flex-grow: 1;
    flex-basis: auto;
    margin: auto 0;
  }
  .subtitle {
    font-variant-numeric: lining-nums proportional-nums;
    align-self: stretch;
    margin-top: 40px;
    font: 42px/126% Rubik, sans-serif;
  }
  .question {
    color: #5c7b81;
    font-variant-numeric: lining-nums proportional-nums;
    font-family: Rubik, sans-serif;
    font-weight: 400;
    line-height: 138.5%;
	letter-spacing: 1.92px;
margin-top: 40px;
  }

  .options {
display: flex;
flex-wrap: wrap;
margin-top: 20px;
gap: 20px;
font-size: 16px;
font-weight: 800;
letter-spacing: 1.4px;
justify-content: center;
}
.button, .submit-button{
font-family: Raleway, sans-serif;
border-radius: 5px;
background-color: #b8d1d2;
justify-content: center;
padding: 20px 40px;
text-decoration: none;
color: #20434d;
display: flex;
align-items: center;
cursor: pointer;
}
.button.selected {
  background-color: #fff;
  color: #fff;
}
.submit-button {
margin-top: 40px;
}

@media (max-width: 991px) {
.button, .submit-button {
padding: 10px 20px;
}
}

</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.options .button');
    const submitButton = document.querySelector('.submit-button');

    if (buttons.length > 0) {
      buttons.forEach(button => {
        button.addEventListener('click', (e) => {
          const target = e.target;
          const buttonsInGroup = target.closest('.options').querySelectorAll('.button');
          
          buttonsInGroup.forEach(btn => btn.classList.remove('selected'));
          target.classList.add('selected');

          console.log(`Button clicked: ${target.textContent}`); // Debugging statement
        });
      });
    }

    if (submitButton) {
      submitButton.addEventListener('click', async () => {
        const selectedOptions = document.querySelectorAll('.options .button.selected');
        const data = {};

        selectedOptions.forEach(option => {
          const questionElement = option.closest('.options').previousElementSibling;
          const question = questionElement ? questionElement.textContent : '';
          const answer = option.textContent || '';
          data[question] = answer;
        });

        try {
          const docRef = await addDoc(collection(db, "quizResults"), data);
          console.log("Document written with ID: ", docRef.id);
        } catch (e) {
          console.error("Error adding document: ", e);
        }
      });
    }
  });
</script>